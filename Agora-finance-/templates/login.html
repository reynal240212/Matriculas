{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<div class="position-absolute w-100 mt-3" style="z-index: 1050;">
    <div class="container d-flex justify-content-center">
        <div class="col-12 col-sm-10 col-md-8 col-lg-6">
            {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissible fade show" role="alert">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}
{% endwith %}

<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesión - FULL ENTRETENIMIENTO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts: Montserrat para el logo -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='descarga.png') }}">
</head>

<body>
    <div class="login-background-overlay"></div>

    <div class="login-header"></div>

    <div class="login-wrapper d-flex justify-content-center align-items-center min-vh-100">
        <div class="login-container p-4 p-md-5 rounded shadow">
            
            <div class="logo-text-container">
                <span class="logo-maintext">
                    ÁG<span class="logo-o">O</span>RA
                </span>
                <br>
                <span class="logo-subtext">
                    FINANCE
                </span>
            </div>

            <h1 class="text-center mb-4 fw-bold text-white">Iniciar sesión</h1>

            <form method="POST" action="{{ url_for('login') }}">
                <!-- Campo de correo -->
                <div class="mb-3">
                    <input type="email" class="form-control login-input" id="correo" name="correo"
                        placeholder="Correo electrónico" required oninput="togglePasswordInput()">
                </div>

                <!-- Campo de contraseña (oculto por defecto) -->
                <div class="mb-4" id="passwordContainer" style="display: none; opacity: 0; transition: opacity 0.5s;">
                    <input type="password" class="form-control login-input" id="password" name="password"
                        placeholder="Contraseña" required>
                </div>

                <button type="submit" class="btn btn-login-netflix w-100 mb-3 fw-bold">Iniciar sesión</button>

                <div class="form-check mb-4 d-flex justify-content-between align-items-center">
                    <div>
                        <input type="checkbox" class="form-check-input" id="rememberMe">
                        <label class="form-check-label text-muted" for="rememberMe">Recordarme</label>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        function togglePasswordInput() {
            const correoInput = document.getElementById("correo");
            const passwordContainer = document.getElementById("passwordContainer");

            if (correoInput.value.trim() !== "") {
                passwordContainer.style.display = "block";
                setTimeout(() => passwordContainer.style.opacity = "1", 10);
            } else {
                passwordContainer.style.opacity = "0";
                setTimeout(() => passwordContainer.style.display = "none", 300);
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
